<!DOCTYPE html>
<title>自动签名</title>
<h1>自动签名</h1>

{#<form id="form1" method="post" action="/upload_apk" enctype="multipart/form-data">#}
{#    <div>#}
{#        <input id="File1" type="file" name="apkfile"/>#}
{#        <input type="submit"></input>#}
{#    </div>#}
{#</form>#}
<h1>新建项目</h1>
<form id="form1" method="post" action="new_project" enctype="multipart/form-data">
    <div>
        <form>
            项目名称:
            <input id="id_aliase" type="text" name="projectname"/>
            <br>
            keystore文件:
            <input id="id_keystore" type="file" name="keystore"/>
            <br>
            别名aliase:
            <input id="id_aliase" type="text" name="aliase"/>
            <br>
            密码1:
            <input id="id_psw1" type="text" name="storepass"/>
            密码2:
            <input id="id_psw2" type="text" name="keypass"/>
            <br>
            <input type="submit"></input>
        </form>
    </div>
</form>
<br>
<h1>列表</h1>
{% for file in projects_list %}
    #### {{ file["project_name"] }}####
    ----apk上传----
    <form id="form1" method="post" action="{{ url_for("upload_apk",project_name=file["project_name"]) }}"
          enctype="multipart/form-data">
        <div>
            <input id="File1" type="file" name="apkfile"/>
            <input type="submit"></input>
        </div>
    </form>
    <br>
    {% if "unsign_apk_name" in file %}
        ----{{ file["unsign_apk_name"] }}
        <a href="{{ url_for('delete', project_name=file['project_name'] ,file_name=file["unsign_apk_name"]) }}">删除</a>
        <br>
    {% else %}
        无需要签名的apk
    {% endif %}

    <br>
    <a href="{{ url_for('sign_apk', project_name=file["project_name"]) }}">开始签名</a>
    <br>
    {% if "signed_apk_name" in file %}
        ----{{ file["signed_apk_name"] }}
        <a href="{{ url_for('download', project_name=file['project_name'] ,file_name=file["signed_apk_name"]) }}">下载</a>
        <br>
    {% else %}
        无已经签名的apk
    {% endif %}
    <br><br>
{% endfor %}
